<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– KI-Lern-Buddy</title>
    <link rel="stylesheet" href="/static/style.css">
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>ğŸ¤– KI-Lern-Buddy</h1>
                <p>Intelligente LernunterstÃ¼tzung mit KI-Personalisierung</p>
            </div>
            <div class="user-info">
                <span id="usernameDisplay">Lade...</span>
                <button class="school" onclick="showSchoolSetup()">ğŸ« Schulkonfig</button>
                <button class="logout" onclick="logout()">Logout</button>
                <button onclick="toggleDebug()" style="background: #6c757d; padding: 5px 10px; font-size: 12px;">Debug</button>
            </div>

            <button onclick="goToTest()" style="background: #28a745; margin-left: 10px;">
                ğŸ§ª Test-Modus
            </button>

            <script>
            function goToTest() {
                window.location.href = '/test';
            }
            </script>
            <button onclick="window.location.href='/flashcards'" style="background: #6f42c1; margin-left: 10px;">
                ğŸƒ Karteikarten
            </button>
            <button onclick="window.location.href='/static/planner.html'" style="background: #17a2b8; margin-left: 10px;">
                ğŸ“… Lernplaner
            </button>
        </header>

        <div id="debug" class="debug"></div>

        <div class="card">
            <h2>ğŸ« Meine Schule</h2>
            <div id="schoolInfo" class="school-info">
                Lade Schulinformationen...
            </div>
            <div class="form-group" style="margin-top: 15px;">
                <button onclick="loadSchoolContext()">Schuldaten aktualisieren</button>
                <button onclick="showSchoolSetup()" style="background: #28a745;">Schulkonfiguration bearbeiten</button>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“š Ãœbungen generieren</h2>
            <div class="form-group">
                <input type="text" id="subject" placeholder="Fach" value="Mathe">
                <input type="text" id="topic" placeholder="Thema" value="Analysis">
                <input type="number" id="count" placeholder="Anzahl" value="2" min="1" max="5">
                <button onclick="generateExercises()">Ãœbungen generieren</button>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“Š Lern-Session tracken</h2>
            <div class="form-group">
                <input type="text" id="sessionSubject" placeholder="Fach" value="Mathe">
                <input type="number" id="duration" placeholder="Dauer (Minuten)" value="45">
                <input type="text" id="sessionTopics" placeholder="Themen (komma-getrennt)" value="Analysis,Ableitungen">
                <input type="number" id="performance" placeholder="Performance (0-1)" value="0.8" step="0.1" min="0" max="1">
                <button onclick="trackSession()">Session speichern</button>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ•¸ï¸ Dein Wissens-Netzwerk</h2>
            <p style="color: #666; margin-bottom: 10px;">Deine interdisziplinÃ¤ren StÃ¤rken visualisiert.</p>
            <div id="knowledgeGraph" style="height: 400px; border: 1px solid #eee; border-radius: 8px; background: #fcfcfc;">
                <p style="text-align: center; padding-top: 180px; color: #ccc;">Lade Netzwerk...</p>
            </div>
            <div style="text-align: right; margin-top: 10px;">
                <button onclick="loadKnowledgeGraph()" class="secondary" style="font-size: 0.8rem;">ğŸ”„ Aktualisieren</button>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“ˆ Analytics & Profil</h2>
            <div class="form-group">
                <button onclick="showAnalytics()">Analytics laden</button>
                <button onclick="showProfile()">Profil anzeigen</button>
                <button onclick="showRecommendations()">Empfehlungen</button>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ”® Ergebnisse</h2>
            <div id="output" class="output">
                Willkommen beim KI-Lern-Buddy! WÃ¤hle eine Aktion aus.
            </div>
        </div>
    </div>

    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin-bottom: 0; border-bottom: none;">ğŸ“Š Test-Historie</h2>
            <button onclick="loadTestHistory()" style="background: #6c757d; font-size: 0.9rem; padding: 8px 15px;">
                ğŸ”„ Aktualisieren
            </button>
        </div>
        <div id="testHistory">
            <p>Lade Test-Historie...</p>
        </div>
    </div>

    <script src="/static/common.js"></script>
    <script src="/static/dashboard.js"></script>
</body>
</html>